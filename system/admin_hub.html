

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Managing access to the GFTS Hub and S3 Buckets &mdash; Global Fish Tracking System (GFTS) - DestinE Platform use case</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
      <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/code-style.css?v=633ae332" />
      <link rel="stylesheet" type="text/css" href="../_static/xarray-style.css?v=7b4ed5f0" />
      <link rel="stylesheet" type="text/css" href="../_static/service-doc.css?v=d72d29cf" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=a681ed88"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/scripts/sphinx-book-theme.js"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
      <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GFTS Service" href="gfts_service.html" />
    <link rel="prev" title="GFTS JupyterHub" href="gfts_hub.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../intro.html" class="icon icon-home">
            Global Fish Tracking System
              <img src="../_static/logomark.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../GFTS_Use_Case_Description.html">The GFTS Use Case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_of_conduct.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_of_participation.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_of_participation.html#rules-of-participation">Rules of participation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_of_participation.html#how-to-ask-the-inclusion-of-a-new-project">How to ask the inclusion of a new project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rule_of_participation.html#community">Community</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Onboarding new users</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../new2gfts.html">GFTS Presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">GFTS Workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Workflow</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow/input_data_preparation.html">1. Data Preparation for <code class="docutils literal notranslate"><span class="pre">pangeo_fish</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/geolocation_model_execution.html">2. Estimation of fish locations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/scientific_validation.html">3. Scientific Validation of the results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/result_publication.html">4. Result Publication</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other_examples_overview.html">Example Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CopernicusMarine.html">Copernicus Marine for GFTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tag_data.html">Intro to Biologging data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tag_data_summary.html">Tool: How to summarize the tag data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tag_data_summary.html#notebook-initialization">0. Notebook Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tag_data_summary.html#release-locations-overview">1. Release Locations Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tag_data_summary.html#summary-table">2. Summary Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s3_CMEMS_2D_kerchunk.html">Create Kerchunk catalog for CMEMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s3_CMEMS_3D_kerchunk.html">Create Kerchunk catalog for CMEMS 3D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../s3chunked_parquet.html">Read parquet kerchunk catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cmems_catalog_creation.html">Copernicus data exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gfts_intake.html">Reading CMEMS Copernicus data from GFTS s3 bucket</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Compute_3D_pdf.html">Computing 3D PDF from State matrix and tag pressure information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ClimateDT-zarr-2D-3D.html">Extract selected area from DestinE Climate Twin in Healpix to Zarr</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visu3Dvista.html">Visualize bathymetry with pyvista</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reporting &amp; Outreach</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deliverables.html">Project deliverables and reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../outreach.html">Conferences and other events</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GFTS Technical Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gfts_components.html">Overview of GFTS System Components</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="gfts_hub.html">GFTS JupyterHub</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Managing access to the GFTS Hub and S3 Buckets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gfts_service.html">GFTS Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="admin_doc.html">Documentation Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gfts_github_actions.html">GFTS Verification and Validation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../intro.html">Global Fish Tracking System</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../intro.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="gfts_hub.html">GFTS JupyterHub</a></li>
      <li class="breadcrumb-item active">Managing access to the GFTS Hub and S3 Buckets</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/system/admin_hub.md" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="managing-access-to-the-gfts-hub-and-s3-buckets">
<h1>Managing access to the GFTS Hub and S3 Buckets<a class="headerlink" href="#managing-access-to-the-gfts-hub-and-s3-buckets" title="Link to this heading"></a></h1>
<p>Only authorized users can access the GFTS Hub and its S3 buckets. The sections below explain how users can request access to the GFTS Hub, how administrators can grant access to the Hub and existing S3 buckets, and, eventually, how to create new S3 buckets when needed.</p>
<section id="getting-access-to-the-gfts-hub-and-s3-buckets">
<h2>Getting access to the GFTS Hub and S3 Buckets<a class="headerlink" href="#getting-access-to-the-gfts-hub-and-s3-buckets" title="Link to this heading"></a></h2>
<p>The first step is to create an <a class="reference external" href="https://github.com/destination-earth/DestinE_ESA_GFTS/issues/new">issue</a> with the following information:</p>
<ol class="arabic simple">
<li><p>The GitHub username of the person you want to add to the GFTS Hub;</p></li>
<li><p>The list of S3 buckets this new person would need to access.</p></li>
<li><p>If a new group of users is required, please specify the name of the new S3 private bucket to be created for this group and identify any existing users who need access to it. <strong>A new group of users is necessary if you have a unique set of biologging data that must remain private and cannot be shared publicly, or if you need to share intermediate and non-validated results within a specific group before making them available to the GFTS community</strong>.</p></li>
</ol>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The current list of authorized GFTS users can be found in <a class="reference external" href="https://github.com/destination-earth/DestinE_ESA_GFTS/blob/main/gfts-track-reconstruction/jupyterhub/gfts-hub/values.yaml#L169"><code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/gfts-hub/values.yaml</span></code></a>.</p>
</div>
</section>
<section id="giving-access-to-the-gfts-hub-and-existing-s3-buckets-admin-only">
<h2>Giving access to the GFTS Hub and existing S3 Buckets (Admin only)<a class="headerlink" href="#giving-access-to-the-gfts-hub-and-existing-s3-buckets-admin-only" title="Link to this heading"></a></h2>
<p>Everyone can initiate a Pull Request to add a new user with read-only access to <code class="docutils literal notranslate"><span class="pre">gfts-reference-data</span></code> and <code class="docutils literal notranslate"><span class="pre">destine-gfts-data-lake</span></code>.
There is only one step:</p>
<ol class="arabic simple">
<li><p>Add the new user (github username) in <strong>lowercase</strong> in <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/gfts-hub/values.yaml</span></code></p></li>
</ol>
<p>When the PR is merged, the github user will have read-only access to <code class="docutils literal notranslate"><span class="pre">gfts-reference-data</span></code> and <code class="docutils literal notranslate"><span class="pre">destine-gfts-data-lake</span></code> and will be able to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">s3fs</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">s3fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="n">anon</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">s3</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;gfts-reference-data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To grant read access to private data or write access, the user must be added to an s3 group in the <code class="docutils literal notranslate"><span class="pre">tofu</span></code> configuration,
adding the following steps which can only be done by a GFTS Hub admin:</p>
<ol class="arabic" start="2">
<li><p>Add the github username (lowercase) in one of the <code class="docutils literal notranslate"><span class="pre">s3_</span></code> groups in <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/tofu/main.tf</span></code> for the following permissions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">s3_ifremer_developers</span></code>: write access to <code class="docutils literal notranslate"><span class="pre">gfts-ifremer</span></code> and <code class="docutils literal notranslate"><span class="pre">gfts-reference-data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3_ifremer_users</span></code>: write access to <code class="docutils literal notranslate"><span class="pre">gfts-ifremer</span></code> only</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3_vliz_users</span></code>: write access to <code class="docutils literal notranslate"><span class="pre">gfts-vliz</span></code> only</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3_admins</span></code>: admin access to all s3 buckets</p></li>
</ul>
<p>If you need to create a new user group and a private S3 bucket for them, please read the next section on creating a new user group before proceeding with steps 3–6.</p>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">tofu</span> <span class="pre">apply</span></code> to apply the S3 permissions. Ensure you are in the <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/tofu</span></code> folder before executing the <code class="docutils literal notranslate"><span class="pre">tofu</span></code> command and have run <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">secrets/ovh-creds.sh</span></code>.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/secrets/config.yaml</span></code> with the output of the command <code class="docutils literal notranslate"><span class="pre">tofu</span> <span class="pre">output</span> <span class="pre">-json</span> <span class="pre">s3_credentials_json</span></code>. This command needs to be executed in the <code class="docutils literal notranslate"><span class="pre">tofu</span></code> folder after applying the S3 permissions with <code class="docutils literal notranslate"><span class="pre">tofu</span> <span class="pre">apply</span></code>. If the file contains binary content, it means you do not have the rights to add new users to the GFTS S3 buckets and will need to ask a GFTS admin for assistance.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">pytest</span></code> in the <code class="docutils literal notranslate"><span class="pre">tofu</span></code> directory to test s3 permissions.</p></li>
<li><p>Don’t forget to commit and push your changes!</p></li>
</ol>
<p>Steps 3 and 4 are what actually grant the jupyterhub user s3 access.</p>
</section>
<section id="creating-a-new-group-of-users-admin-only">
<h2>Creating a new group of users (Admin only)<a class="headerlink" href="#creating-a-new-group-of-users-admin-only" title="Link to this heading"></a></h2>
<p>If you need to create a new user group with a corresponding private S3 bucket, follow the additional step below (to be completed after step 1 and before step 2).</p>
<p>Choose a new group name (not too long e.g. &lt; 8 characters) which can be the organisation name of the user(s) or its acronym. We suggest to add the prefix <code class="docutils literal notranslate"><span class="pre">gfts-</span></code> (e.g. gfts-ifremer, gfts-vliz, etc.). In the example below, we are adding a new group of users called <code class="docutils literal notranslate"><span class="pre">gfts-vliz</span></code>:</p>
<ul class="simple">
<li><p>Add the new bucket name in the <code class="docutils literal notranslate"><span class="pre">s3_buckets</span></code> variable in <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/tofu/main.tf</span></code>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">s3_buckets</span> <span class="o">=</span> <span class="n">toset</span><span class="p">([</span>
    <span class="s2">&quot;gfts-vliz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gfts-ifremer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gfts-reference-data&quot;</span><span class="p">,</span>
    <span class="s2">&quot;destine-gfts-data-lake&quot;</span><span class="p">,</span>
  <span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create a new variable to list the users who will have access to the new S3 bucket. Locate the variable <code class="docutils literal notranslate"><span class="pre">s3_ifremer_users</span></code> and add the new variable immediately after it:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">s3_vliz_users</span> <span class="o">=</span> <span class="n">toset</span><span class="p">([</span>
    <span class="s2">&quot;davidcasalsvliz&quot;</span><span class="p">,</span>
  <span class="p">])</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">s3_users</span></code> variable by adding the new list of users (here <code class="docutils literal notranslate"><span class="pre">local.s3_vliz_users</span></code>):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_users</span> <span class="o">=</span> <span class="n">setunion</span><span class="p">(</span><span class="n">local</span><span class="o">.</span><span class="n">s3_readonly_users</span><span class="p">,</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_admins</span><span class="p">,</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_vliz_users</span><span class="p">,</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_ifremer_developers</span><span class="p">,</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_ifremer_users</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create a new resource policy for this new group of users (search for <code class="docutils literal notranslate"><span class="pre">resource</span> <span class="pre">&quot;ovh_cloud_project_user_s3_policy&quot;</span> <span class="pre">&quot;s3_ifremer_users&quot;</span></code> to locate the section on resource policy for users):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resource</span> <span class="s2">&quot;ovh_cloud_project_user_s3_policy&quot;</span> <span class="s2">&quot;s3_vliz_users&quot;</span> <span class="p">{</span>
  <span class="n">for_each</span>     <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_vliz_users</span>
  <span class="n">service_name</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="n">service_name</span>
  <span class="n">user_id</span>      <span class="o">=</span> <span class="n">ovh_cloud_project_user</span><span class="o">.</span><span class="n">s3_users</span><span class="p">[</span><span class="n">each</span><span class="o">.</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
  <span class="n">policy</span> <span class="o">=</span> <span class="n">jsonencode</span><span class="p">({</span>
    <span class="s2">&quot;Statement&quot;</span> <span class="p">:</span> <span class="n">concat</span><span class="p">([</span>
      <span class="p">{</span>
        <span class="s2">&quot;Sid&quot;</span> <span class="p">:</span> <span class="s2">&quot;Admin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Effect&quot;</span> <span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Action&quot;</span> <span class="p">:</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_admin_action</span><span class="p">,</span>
        <span class="s2">&quot;Resource&quot;</span> <span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;arn:aws:s3:::${aws_s3_bucket.gfts-vliz.id}&quot;</span><span class="p">,</span>
          <span class="s2">&quot;arn:aws:s3:::${aws_s3_bucket.gfts-vliz.id}/*&quot;</span><span class="p">,</span>
        <span class="p">]</span>
      <span class="p">},</span>
    <span class="p">],</span> <span class="n">local</span><span class="o">.</span><span class="n">s3_default_policy</span><span class="p">)</span>
  <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Make sure your replace <code class="docutils literal notranslate"><span class="pre">vliz</span></code> with the new group name!</p>
<ul class="simple">
<li><p>Create the new S3 bucket by locating resource <code class="docutils literal notranslate"><span class="pre">&quot;aws_s3_bucket&quot;</span> <span class="pre">&quot;gfts-ifremer&quot;</span></code> and adding the new bucket configuration immediately after it:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">resource</span> <span class="s2">&quot;aws_s3_bucket&quot;</span> <span class="s2">&quot;gfts-vliz&quot;</span> <span class="p">{</span>
  <span class="n">bucket</span> <span class="o">=</span> <span class="s2">&quot;gfts-vliz&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>You are done with the configuration of the new group and its corresponding private S3 bucket. Go back to the previous section on <a class="reference external" href="https://destination-earth.github.io/DestinE_ESA_GFTS/admin_hub.html#giving-access-to-the-gfts-hub-and-s3-buckets-admin-only">giving access to the GFTS Hub and S3 buckets</a> and follow the steps 2-6.</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The following packages need to be installed on your system:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://ssh-vault.com">ssh-vault</a>;</p></li>
<li><p><a class="reference external" href="https://github.com/AGWA/git-crypt/blob/master/INSTALL.md">git-crypt</a>;</p></li>
<li><p><a class="reference external" href="https://opentofu.org">opentofu</a></p></li>
</ol>
<p>As an admin, you’ll need to set up your environment. The GFTS maintainer will provide you with a key encrypted with your GitHub SSH key. Save the content sent by the GFTS maintainer into a file, and name it <code class="docutils literal notranslate"><span class="pre">ssh-vault.txt</span></code>. At the moment, the keys are known to <a class="reference external" href="https://github.com/annefou">annefou</a> and <a class="reference external" href="https://github.com/minrk">minrk</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>ssh-vault.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>ssh-vault<span class="w"> </span>view<span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>--decode<span class="w"> </span>&gt;<span class="w"> </span>keyfile<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git-crypt<span class="w"> </span>unlock<span class="w"> </span>keyfile<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>keyfile
</pre></div>
</div>
<p>Before executing the command above, ensure you have changed the directory to the root of the <code class="docutils literal notranslate"><span class="pre">DestinE_ESA_GFTS</span></code> git repository.</p>
<p>Thanks to the previous command, you should be able to <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">gfts-track-reconstruction/jupyterhub/tofu/secrets/ovh-creds.sh</span></code> and see a text file.</p>
<p>Finally to initialize your environment and execute <code class="docutils literal notranslate"><span class="pre">tofu</span></code> commands, you need to change the directory to the <code class="docutils literal notranslate"><span class="pre">gfts-track-reconstruction/jupyterhub/tofu</span></code> folder and source <code class="docutils literal notranslate"><span class="pre">secrets/ovh-creds.sh</span></code> e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>secrets/ovh-creds.sh
tofu<span class="w"> </span>init
tofu<span class="w"> </span>apply
</pre></div>
</div>
</div>
<p>Then you are ready to go and can follow the steps explained above to grant access to S3 buckets to a new user.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./system"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gfts_hub.html" class="btn btn-neutral float-left" title="GFTS JupyterHub" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gfts_service.html" class="btn btn-neutral float-right" title="GFTS Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Development Seed, Simula, and Ifremer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>